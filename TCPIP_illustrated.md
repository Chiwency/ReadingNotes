# TCP/IP Illustrated

## Link Layer

+ **CSMA/CD**: (carrier  sense,  multiple  access  with  collision  detection) 载波监听，碰撞检测协议。以太网（ Ethernet）用的一种协调同一总线上各站点发送数据帧（frame，链路层的PUD）的协议。

  > 但是CSMA/CD 一般用于 10Mb/s 的以太网， 到后来 100Mb/s 甚至更高带宽的以太网，用的是星型拓扑结构，每个主机之间用交换机（switch）连接起来，每条线路都是全双工通道（可以同时接收和发送信息），交换机可以隔离碰撞域，所以就不需要CSMA/CD协议了。

+ **Frame format**:

  ![frame_format](./images/frame_format.png)

+  **FCS**: (Frame Check Sequence/Cyclic Redundancy Check (CRC)): 循环冗余码检测, 检测帧在传输过程中是否

  是否出现差错，但是不能定位差错

+ **Frame Sizes**: 数据链路层的帧长度有最大最小限制，一般而言（IEEE的某个协议规定）最小是 ``64 bytes``  ,不足的用``0 bits``填充. 最大长度是``1518 bytes`` 但是对于网络层的最大``64 KB`` 的数据报，帧长度显然不够，就需要对数据报进行分片，至少``44 frames`` , 为了提高数据传输率，有的协议会扩大帧长度，能超过``9000 bytes`` 

  > 最小帧长度是为了适应在使用CSMA/CD以太网中，发送时延满足一个往返时间。当发送最后一个bit时，能检测到有无碰撞。 
  >
  > 设置最大长度是为了在CRC检测到错误丢弃帧时，减少重发带来的损耗。

+ **VLAN**: 使用交换机的以太网可以方便的实现多播、广播，但是当以太网中的主机过多，多个主机同时进行广播就会严重占用信道资源，同时也出于一些安全考虑，就出现一种策略，将一个以太网通过``交换机端口(常用)``、``MAC地址``或``IP地址`` 来分为多个不同的虚拟局域网``VLAN`` , 进行逻辑上的切分，在链路上发送帧时，通过帧内的``VLAN ID`` 来区分。不同虚拟局域网之间的通信要通过路由器``router`` 来完成。

+ **LACP**:（Link Aggregation Control Protocol），有的操作系统有多个网络接口可以实现链路聚合，可以同时通过多个接口发送数据实现高速可靠的数据传输，从而降低了对高性能交换机的需求。

  > 书中举例将有限以太网接口和无线局域网接口聚合，生成一个虚拟接口，数据报通过虚拟接口转发，然后有五种模式来确定数据报实际是由哪个接口发送。比如两个接口可以实现负载均衡转发或者备份转发。